{% extends "base.html" %}
{% block content %}
<div class="container-fluid">
    <div class="row">

        <!--- PROFILE DETAILS, LEFT PART OF PAGE --->
        {% include 'components/profile-card.html' %}

        <!--- MIDDLE PART --->
        <div class="col-md-5">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Appointment Type</th>
                        <th>Date</th>
                        <th>Patient name</th>
                    </tr>
                </thead>
                <tbody>
                    {% for appointment in appointments_list %}
                    <tr>
                        <td><a href="/appointment/{{appointment.id}}/patient/{{appointment.patient_id}}"><button
                                    type="button" class="btn btn-dark btn-sm">View</button></a></td>
                        <td>{{ appointment.appointment_type }}</td>
                        <td>{{ appointment.time }}</td>
                        <td>{{ appointment.patient_name }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!--- ADD APPOINTMENT --->
            <div>
                <h5><u>Book appointment</u></h5>
                <form action="/appointment/book/{{user_id}}" method="POST">
                    <div class="form-row">
                        <div class="col-md-7 mb-3">
                            <label for="appointment_type">Appointment type:</label>
                            <input type="text" name="appointment_type" class="form-control"
                                placeholder="Enter appointment type">
                        </div>
                        <div class="col-md-5 mb-3">
                            <label for="patient">For patient:</label>
                            <select class="custom-select" id="patient" name="patient_id">
                                <option selected value="1">Patient1</option>
                                <option value="2">Patient2</option>
                                <option value="3">Patient3</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-5 mb-3">
                            <label for="dateTime">Appointment date:</label>
                            <input class="form-control" type="datetime-local" min="{{time_now}}" name="appointment_date" id="dateTime">
                        </div>
                        <div class="col-md-4 mb-2">
                            <label>fix</label>
                            <button class="btn btn-dark btn-sm form-control" id="appointment_submit" type="submit">Add
                                appointment <i class="far fa-calendar-check"></i></button>
                        </div>
                    </div>
                </form>
            </div>
            <br>

            <!--- ADD PRESCRIPTIONS --->
            <h5><u>Create new prescription</u></h5>
            <form action="/add-prescription" method="POST">
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="prescription">Prescription name:</label>
                        <input type="text" id="prescription" name="prescription_name" class="form-control"
                            placeholder="Enter prescription name">
                    </div>
                    <div class="col-md-2 mb-3">
                        <label>Per day:</label>
                        <select class="custom-select" name="amount_per_day">
                            <option selected value="1">1</option>
                            {% for index in range(2,9) %}
                            <option value="{{ index }}">{{ index }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4 mb-2">
                        <label>fix</label>
                        <button class="btn btn-dark btn-sm form-control" type="submit">Create prescription</button>
                    </div>
                </div>
            </form>
        </div>

        <!--- RIGHT PART --->
        <div class="col-md-4">
            <a href="/settings"><button>profile settings <i class="fas fa-cog"></i></button></a>
            <button>log out <i class="fas fa-sign-out-alt"></i></button>
            <div class="row-md-8"></div>
            <div>
                <h5><u>Send message to your patients</u></h5>
                <label>Choose patient:</label>
                <form action="/send-message" method="POST">
                    <select class="custom-select">
                        <option selected value="1">Patient1</option>
                        <option value="2">Patient2</option>
                        <option value="3">Patient3</option>
                    </select>
                    <textarea name="content" rows="3" cols="40" placeholder="Enter message"></textarea>
                    <br>
                    <button class="btn btn-dark btn-sm" type="submit">Send message <i
                            class="far fa-paper-plane"></i></button>
                </form>
            </div>
            <br>

            <!--- Sent messages rendering --->
            <h5><u>Message history</u></h5>
            <button type="button" class="btn btn-dark btn-sm" data-toggle="collapse" data-target="#sentMessages">Sent
                messages <i class="fas fa-angle-down fa-flip-horizontal"></i></button>
            <div id="sentMessages" class="collapse">
                <ul class="list-group">
                    {% for message in sentMessages %}
                    <li class="list-group-item">{{ message.content }} {{ message.sent_at }} TO: TEST</li>
                    {% endfor %}
                </ul>
            </div>

            <!--- Received messages rendering --->
            <button type="button" class="btn btn-dark btn-sm" data-toggle="collapse"
                data-target="#receivedMessages">Received messages <i class="fas fa-angle-down"></i></button>
            <div id="receivedMessages" class="collapse">
                <ul class="list-group">
                    {% for message in receivedMessages %}
                    <li class="list-group-item">{{ message.content }} {{ message.sent_at }} FROM: TEST</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}